'use strict';

const stripAnsi = (...args) => import('strip-ansi').then(({ default: fetch }) => fetch(...args));
const charRegex = (...args) => import('char-regex').then(({ default: fetch }) => fetch(...args));

const stringLength = async string => {
	if (string === '') {
		return 0;
	}

	const strippedString = await stripAnsi(string);

	console.log('strippedString:', strippedString);

	if (strippedString === '') {
		return 0;
	}

	const charMatch = strippedString.match(await charRegex());
	console.log('charMatch:', charMatch);

	if (charMatch) {
		return charMatch.length;
	} else {
		return 0;
	}
};

module.exports = stringLength;
